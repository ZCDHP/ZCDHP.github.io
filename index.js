!function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=2)}([function(e,t){e.exports=React},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.assertUnreachable=function(e){throw new Error("Didn't expect to get here")},t.strEnum=function(e){return e.reduce((e,t)=>(e[t]=t,e),Object.create(null))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(0),a=n(3),o=n(4);document.addEventListener("DOMContentLoaded",()=>{a.render(r.createElement(o.Main,{id:"flappy"}),document.body)})},function(e,t){e.exports=ReactDOM},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(a,o){function c(e){try{l(r.next(e))}catch(e){o(e)}}function i(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){e.done?a(e.value):new n(function(t){t(e.value)}).then(c,i)}l((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const a=n(0),o=n(1),c=n(5),i=["0.png","1.png","2.png","3.png"].map(e=>{const t=new Image;return t.src=`./flappy/${e}`,t});function l(e){e.canvas.width=e.canvas.clientWidth,e.canvas.height=e.canvas.clientWidth/16*9,e.canvas.style.height=`${e.canvas.height}px`;const t=e.canvas.clientWidth/1600;e.setTransform(t,0,0,t,0,0)}function s(e,t){const n=i[Math.floor(window.performance.now()/c.PlayerLeft%i.length)];e.drawImage(n,100,t,.5*c.PlayerWidth,c.PlayerHeight),e.save(),e.scale(-1,1),e.drawImage(n,-125,t,-.5*c.PlayerWidth,c.PlayerHeight),e.restore()}function f(e,t){e.fillStyle="black",e.fillRect(t.left,0,c.CheckAreaWidth,t.top),e.fillRect(t.left,t.top+c.CheckAreaHeight,c.CheckAreaWidth,1600-t.top-c.CheckAreaHeight)}t.Main=class extends a.Component{constructor(){super(...arguments),this.renderContext=null,this.gameState=c.DefaultState}render(){return a.createElement("div",{className:"Game"},a.createElement("canvas",{id:this.props.id,onClick:e=>this.gameState=c.click(this.gameState)}),a.createElement("button",{onClick:e=>this.gameState=c.DefaultState},"New Game"))}componentDidMount(){return r(this,void 0,void 0,function*(){yield Promise.all(i.map(e=>new Promise((t,n)=>e.onload=t)));const e=document.getElementById(this.props.id);e.onselectstart=(e=>!1);const t=e.getContext("2d");this.renderContext=t,window.onresize=(e=>l(t)),l(t);const n=(e,t)=>{this.gameState=c.frame(e-t,this.gameState),function(e,t){switch(e.clearRect(0,0,1600,900),t.type){case c.GameStateTypes.ClickToStart:return e.fillStyle="green",e.font="80px Arial",void e.fillText("Click To Start",520,400);case c.GameStateTypes.Flapping:return t.checkAreas.forEach(t=>f(e,t)),s(e,t.top),void function(e,t){e.fillStyle="green",e.font="40px Arial",e.fillText(t.toString(),60,60)}(e,t.score);case c.GameStateTypes.Oops:return t.checkAreas.forEach(t=>f(e,t)),s(e,t.top),e.fillStyle="green",e.font="80px Arial",e.fillText("Oops",640,400),void e.fillText(`Your Score: ${t.score}`,500,500)}o.assertUnreachable(t)}(this.renderContext,this.gameState),requestAnimationFrame(t=>n(t,e))},r=window.performance.now();requestAnimationFrame(e=>n(e,r))})}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(1),a=n(6),o=n(7),c=.001,i=-.4,l=-.1;t.PlayerHeight=50,t.PlayerWidth=50,t.PlayerLeft=100,t.CheckAreaWidth=75,t.CheckAreaHeight=150;const s=200;function f(){return{type:t.GameStateTypes.Flapping,top:500,velocity:0,checkAreas:Array.from(function*(){for(let e=500;e<1600;e+=t.CheckAreaWidth+s)yield{top:Math.floor(Math.random()*Math.floor(500))+200,left:e}}()),score:0}}function*u(e){for(let t=1;t<e.length;t++)yield new a.default(e[t-1],e[t])}t.GameStateTypes=r.strEnum(["ClickToStart","Flapping","Oops"]),t.DefaultState={type:t.GameStateTypes.ClickToStart},t.frame=function(e,n){switch(n.type){case t.GameStateTypes.ClickToStart:return n;case t.GameStateTypes.Flapping:return function(e,n){const r=n.velocity+e*c,i=n.top+.5*(r+n.velocity)*e,f=n.checkAreas.map(t=>({top:t.top,left:t.left+e*l})),h=n.score+(f.filter(e=>e.left+t.CheckAreaWidth<t.PlayerLeft).length-n.checkAreas.filter(e=>e.left+t.CheckAreaWidth<t.PlayerLeft).length);for(;f.length>0&&f[0].left+t.CheckAreaWidth<0;)f.shift();return 1600-f[f.length-1].left>t.CheckAreaWidth+s&&f.push({top:Math.floor(Math.random()*Math.floor(500))+200,left:f[f.length-1].left+t.CheckAreaWidth+s}),i<900-t.PlayerHeight&&i>0&&f.every(e=>!function(e,n){if(!(t.PlayerLeft+t.PlayerWidth>=n.left&&t.PlayerLeft<=n.left+t.CheckAreaWidth))return!1;const r=function(e){return[...u([new o.default(e.left,0),new o.default(e.left,e.top),new o.default(e.left+t.CheckAreaWidth,e.top),new o.default(e.left+t.CheckAreaWidth,0)]),...u([new o.default(e.left,1600),new o.default(e.left,e.top+t.CheckAreaHeight),new o.default(e.left+t.CheckAreaWidth,e.top+t.CheckAreaHeight),new o.default(e.left+t.CheckAreaWidth,1600)])]}(n);return[...u([new o.default(t.PlayerLeft+8,e+43),new o.default(t.PlayerLeft+25,e+3),new o.default(t.PlayerLeft+42,e+43)])].some(e=>r.some(t=>a.default.intersects(e,t)))}(i,e))?{type:t.GameStateTypes.Flapping,top:i,velocity:r,checkAreas:f,score:h}:{type:t.GameStateTypes.Oops,top:i,checkAreas:n.checkAreas,score:n.score}}(e,n);case t.GameStateTypes.Oops:return n}r.assertUnreachable(n)},t.click=function(e){switch(e.type){case t.GameStateTypes.ClickToStart:return f();case t.GameStateTypes.Flapping:return{type:t.GameStateTypes.Flapping,top:e.top,velocity:i,checkAreas:e.checkAreas,score:e.score};case t.GameStateTypes.Oops:return e}r.assertUnreachable(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(e,t){this.point1=e,this.point2=t}static intersects(e,t){const n=e.point1,r=e.point2,a=t.point1,o=t.point2,c=(r.x-n.x)*(o.y-a.y)-(r.y-n.y)*(o.x-a.x),i=(n.y-a.y)*(o.x-a.x)-(n.x-a.x)*(o.y-a.y),l=(n.y-a.y)*(r.x-n.x)-(n.x-a.x)*(r.y-n.y);if(0==c)return 0==i&&0==l;const s=i/c,f=l/c;return s>=0&&s<=1&&f>=0&&f<=1}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class r{constructor(e,t){this.x=e,this.y=t}}r.add=((e,t)=>new r(e.x+t.x,e.y+t.y)),r.subtracion=((e,t)=>new r(e.x-t.x,e.y-t.y)),r.dot=((e,t)=>e.x*t.y-e.y*t.x),t.default=r}]);